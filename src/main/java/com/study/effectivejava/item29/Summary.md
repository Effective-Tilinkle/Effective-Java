# 이왕이면 제네릭 타입으로 만들라
- E와 같은 실체화 불가 타입으로는 배열을 만들 수 없다. 배열을 사용하는 코드를 제네릭으로 만들 때에는 이 문제가 항상 발목을 잡는다.
- 적절한 해결책은 두 가지다.
  1. 제네릭 배열 생성을 금지하는 제약을 대놓고 우회하는 방법
     1. Object 배열을 생성한 다음에 제네렉 배열로 형변환 해보자. 이제 컴파일러는 오류대신 경고를 내보낼 것이다.
     2. 컴파일러가 타입안정성을 증명할 수 없지만 우리는 가능하다, 즉, 우리 스스로 타입 안정성을 해치지 않음을 확인해야한다.
  2. elements 필드의 타입을 E[]에서 Object[]로 바꾸는 것이다. 배열이 반환한 원소를 E로 형변환 하면 오류 대신 경고가 뜬다.
     1. E는 실체화 불가 타입 이므로 컴파일러는 런타임에 이뤄지는 형변환이 안전한지 증명할 방법이 없다.

- 현업에서는 2번째 방식은 읽을 때마다 형변환을 해줘야하므로, 1번째 방식을 더 선호한다.
  - 하지만 이는 배열의 런타이 타입이 컴파일 타임 타입과 달라 힙 오염을 일으킨다. 힙 오염이 마음에 걸리면 두번째로 하기도 한다.
